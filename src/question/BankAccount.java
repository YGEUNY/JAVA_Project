package question;

import java.text.DecimalFormat;
import java.util.InputMismatchException;
import java.util.Scanner;

public class BankAccount {
	private String mAccount = "", mAccountName = "";
	private int mBalance =0;
	private int balance = 0;
	Scanner sc = new Scanner(System.in);


	public BankAccount(String account, String name, int balance) {
		mAccount = account;
		mAccountName = name;
		mBalance = balance;
	}
	
	public void deposit() {
		System.out.print("입금할 금액 : ");
		balance = numberException();
		
		while(ifNegativeAmount(balance) == false) 
			balance = numberException();
	
		System.out.println(convertToDecimalFormat(balance) + "원 입금합니다.");
		mBalance = mBalance + balance;
	}

	public void withdraw() {
		System.out.print("출금할 금액 : ");
		balance = numberException();
		
		while(withdrawError(mBalance, balance) != true  || ifNegativeAmount(balance) != true)
			balance = numberException();
			
		System.out.println(convertToDecimalFormat(balance) + "원 출금합니다.");
		mBalance = mBalance - balance;
	}
	
	public String convertToDecimalFormat(int amount) {
		DecimalFormat format = new DecimalFormat("###,###");
		return format.format(amount);
	}
	
	public boolean withdrawError(int mBalance, int balance) {
		if(balance > mBalance) {
			System.out.print("잔액이 부족합니다. 다시 입력하세요 : ");
			return false;
		}
		else
			return true;	
	}
	
	public boolean ifNegativeAmount(int amount) {
		if(amount < 0) {
			System.out.print("올바른 금액을 입력하세요 : ");
			return false;
		}
		else
			return true;	
	}
	
	public int numberException() {
		int number = 0;
		while(true) {
			try {
				number = sc.nextInt();
				break;
			} catch (InputMismatchException e) {
				sc = new Scanner(System.in);
				System.out.print("숫자를 입력하세요 :");
			}
		}
		return number;
	}

	public String getmAccount() {
		return mAccount;
	}

	public void setmAccount(String mAccount) {
		this.mAccount = mAccount;
	}	
	
	public int getmBalance() {
		return mBalance;
	}

	public void setmBalance(int mBalance) {
		this.mBalance = mBalance;
	}

	@Override
	public String toString() {
		return "\t계좌번호:" + mAccount + "\t 계좌주: " + mAccountName + "\t 잔액: " + mBalance;
	}
}
